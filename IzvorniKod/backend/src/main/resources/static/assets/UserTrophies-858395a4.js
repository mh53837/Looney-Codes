import{r as o,S as a}from"./index-1a8425e1.js";const g=({userData:r})=>{const[s,p]=o.useState([]),[l,j]=o.useState(null),[m,f]=o.useState(!0);return o.useEffect(()=>{(r==null?void 0:r.uloga)==="NATJECATELJ"&&fetch(`/api/trophies/user/${r.korisnickoIme}`).then(e=>e.json()).then(e=>{p(e)}).catch(e=>{console.error("error fetching trophy data:",e)})},[r]),o.useEffect(()=>{(async()=>{try{if(s.length>0){const t=s.map(async n=>(await(await fetch(`/api/natjecanja/get/${n.natjecanjeId}`)).json()).nazivNatjecanja),h=await Promise.all(t);p(n=>n.map((c,i)=>({...c,natjecanjeNaziv:h[i]})))}}catch(t){console.error("Error fetching competition names:",t)}})()},[s]),o.useEffect(()=>{m&&(async()=>{try{if(s.length>0){const t=s.map(async n=>{const c=await fetch(`/api/trophies/image/${n.peharId}`);if(c.ok){const i=await c.blob();return URL.createObjectURL(i)}else return"/slike/trophyPlaceholder.png"}),h=await Promise.all(t);j(h),f(!1)}}catch(t){console.error("Error fetching trophy pictures:",t),f(!1)}})()},[s,m]),a.jsxs("div",{children:[s.length===0&&a.jsx("p",{children:"nema osvojenih pehara"}),s.map((e,t)=>a.jsxs("div",{className:"userTrophy",children:[a.jsx("h4",{children:e.natjecanjeNaziv}),a.jsx("p",{children:"|"}),a.jsxs("p",{children:["Mjesto: ",e.mjesto]}),a.jsx("p",{children:"|"}),l&&a.jsx("img",{className:"trophyImg",src:l[t],alt:"slika pehara"})]},e.peharId))]})};export{g as default};
