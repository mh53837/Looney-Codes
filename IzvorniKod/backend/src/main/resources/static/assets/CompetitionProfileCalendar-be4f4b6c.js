import{R as d,a as I,r,U as y,T as B,j as e,L as T,C as z}from"./index-b0686eb3.js";import"./UserProfile-eb1d4b07.js";import{A as P}from"./AddProblemsToCompetition-9c9d3559.js";import{q as k}from"./index-1172dc73.js";import{T as A}from"./Table-efc777c4.js";import"./Overflow-2b833c0f.js";/* empty css                              */import"./index-036fa841.js";import"./index-d002dba5.js";import"./index-746205fb.js";import"./InfoCircleFilled-14d8cda3.js";import"./zoom-de641651.js";import"./DialogWrap-6ec0a3f8.js";import"./BaseInput-f1ec11a5.js";import"./index-179dfcbb.js";const w=d.lazy(()=>I(()=>import("./CompetitionUpdateForm-a0bbaef7.js"),["assets/CompetitionUpdateForm-a0bbaef7.js","assets/index-b0686eb3.js","assets/index-f52ba512.css","assets/hr-3d4347db.js","assets/index-1172dc73.js","assets/index-d002dba5.js","assets/index-746205fb.js","assets/index-179dfcbb.js","assets/zoom-de641651.js","assets/interopRequireDefault-01ffd8a5.js","assets/index-036fa841.js","assets/InfoCircleFilled-14d8cda3.js","assets/DialogWrap-6ec0a3f8.js","assets/CompetitionUpdateForm-30e5ddf4.css"])),G=({competitionsData:n,onUpdate:f,userData:j})=>{const[o,v]=r.useState(null),[m,h]=r.useState(!1),[p,u]=r.useState(null),{user:i}=r.useContext(y),l=t=>{const a={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(t).toLocaleString("hr-HR",a)},C=()=>{f()},{theme:g}=r.useContext(B),b=t=>{u(t),h(!0)},S=()=>{h(!1),u(null)},N=({date:t,view:a})=>{if(a==="month"){const s=n.filter(c=>new Date(c.pocetakNatjecanja).toDateString()===(t==null?void 0:t.toDateString()));return s.length>0?e.jsx("div",{children:s.map(c=>e.jsx("p",{style:{fontSize:15},className:"naziv-natjecanje",children:"★"},c.natjecanjeId))}):null}return null},x=t=>{if(t)return e.jsx(A,{dataSource:t,columns:[{title:"korisničko ime",dataIndex:"korisnickoImeVoditelja",key:"korisnickoIme",className:"th-td"},{title:"naziv",dataIndex:"nazivNatjecanja",key:"nazivNatjecanja",className:"th-td",sorter:(a,s)=>a.nazivNatjecanja.localeCompare(s.nazivNatjecanja)},{title:"početak",dataIndex:"pocetakNatjecanja",key:"pocetakNatjecanja",className:"th-td",render:a=>l(a)},{title:"kraj",dataIndex:"krajNatjecanja",key:"krajNatjecanja",className:"th-td",render:a=>l(a)},...i.uloga==="VODITELJ"&&i.korisnickoIme===j.korisnickoIme||i.uloga==="ADMIN"?[{title:"",key:"edit",className:"th-td",render:a=>e.jsx("span",{children:e.jsx(d.Suspense,{fallback:e.jsx("div",{children:"učitavanje..."}),children:e.jsx(w,{natjecanjeId:a.natjecanjeId??0,onUpdateSuccess:C})})})},{title:"",key:"problems",className:"th-td",render:a=>e.jsx("span",{children:e.jsx(d.Suspense,{fallback:e.jsx("div",{children:"učitavanje..."}),children:e.jsx("button",{onClick:()=>b(a.natjecanjeId),children:"zadaci"})})})}]:[]],pagination:!1,rowKey:"natjecanjeId",showSorterTooltip:!1,style:{tableLayout:"fixed"}})};return e.jsxs("div",{className:"calendar-container",children:[i.korisnickoIme===j.korisnickoIme&&e.jsx(T,{to:"/natjecanja/new",children:e.jsx("button",{className:"addBtn",children:"novo natjecanje"})}),e.jsx(z,{value:o,onChange:t=>v(t),tileContent:N,locale:"hr-HR"}),e.jsx("div",{className:"info-table",children:o!==null?e.jsxs("div",{children:[e.jsxs("p",{children:["označeni datum: ",l(o.toUTCString())]}),(()=>{const t=n==null?void 0:n.filter(a=>new Date(a.pocetakNatjecanja).toDateString()===o.toDateString());return(t==null?void 0:t.length)===0?e.jsx("p",{children:"na označeni datum nema natjecanja"}):e.jsx("div",{className:"tableWrapper",children:e.jsx("div",{className:"info-table",children:g.isThemeDark==!1?e.jsx(k,{theme:{components:{Table:{headerBg:"#f4c95de7",rowHoverBg:"#f4c95d52",borderColor:"#00000085",headerFilterHoverBg:"#f4c95de7",headerSortActiveBg:"#f4c95de7",headerSortHoverBg:"#f4c95da9",headerBorderRadius:0,colorPrimary:"#dd7230",headerSplitColor:"transparent",colorBgContainer:"#fff",colorText:"#000"}}},children:x(t)}):e.jsx(k,{theme:{components:{Table:{headerBg:"#dd7230",rowHoverBg:"#dcdcdc34",borderColor:"#00000085",headerFilterHoverBg:"#dd7230e0",headerSortActiveBg:"#dd7230e0",headerSortHoverBg:"#dd7230",headerBorderRadius:0,colorPrimary:"#f4c95d",headerSplitColor:"transparent",colorBgContainer:"#2A2D34",colorText:" #ECDCC9"}}},children:x(t)})})})})()]}):e.jsx("p",{children:"odaberite datum"})}),m&&p&&e.jsx(d.Suspense,{fallback:e.jsx("div",{children:"učitavanje..."}),children:e.jsx(P,{natjecanjeId:p,visible:m,onClose:S})})]})};export{G as default};
