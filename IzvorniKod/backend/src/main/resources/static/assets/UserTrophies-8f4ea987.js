import{r as n,S as a}from"./index-723c806d.js";const f=({userData:o})=>{const[s,p]=n.useState([]),[m,l]=n.useState(null);return n.useEffect(()=>{(o==null?void 0:o.uloga)==="NATJECATELJ"&&fetch(`/api/trophies/user/${o.korisnickoIme}`).then(e=>e.json()).then(e=>{console.log("Trophy data:",e),p(e)}).catch(e=>{console.error("error fetching trophy data:",e)})},[o]),n.useEffect(()=>{(async()=>{try{if(s.length>0){const t=s.map(async r=>(await(await fetch(`/api/natjecanja/get/${r.natjecanjeId}`)).json()).nazivNatjecanja),i=await Promise.all(t);p(r=>r.map((h,c)=>({...h,natjecanjeNaziv:i[c]})))}}catch(t){console.error("Error fetching competition names:",t)}})()},[s]),n.useEffect(()=>{(async()=>{try{if(s.length>0){const t=s.map(async r=>{const c=await(await fetch(`/api/trophies/image/${r.peharId}`)).blob();return URL.createObjectURL(c)}),i=await Promise.all(t);l(i)}}catch(t){console.error("Error fetching trophy pictures:",t)}})()},[s]),a.jsxs("div",{children:[s.length===0&&a.jsx("p",{children:"nema osvojenih pehara"}),s.map((e,t)=>a.jsxs("div",{className:"userTrophy",children:[a.jsx("h4",{children:e.natjecanjeNaziv}),a.jsx("p",{children:"|"}),a.jsxs("p",{children:["Mjesto: ",e.mjesto]}),a.jsx("p",{children:"|"}),m&&a.jsx("img",{className:"trophyImg",src:m[t],alt:"slika pehara"})]},e.peharId))]})};export{f as default};
