import{R as s,a as x,r as d,U as I,T,j as e,L as v}from"./index-b0686eb3.js";import{q as j}from"./index-1172dc73.js";import{T as C}from"./Table-efc777c4.js";import"./index-746205fb.js";import"./BaseInput-f1ec11a5.js";import"./Overflow-2b833c0f.js";import"./index-d002dba5.js";import"./zoom-de641651.js";import"./UserProfile-eb1d4b07.js";import"./index-179dfcbb.js";const B=s.lazy(()=>x(()=>import("./ProblemUpdateForm-b7711ca7.js"),["assets/ProblemUpdateForm-b7711ca7.js","assets/index-b0686eb3.js","assets/index-f52ba512.css","assets/index-1172dc73.js","assets/index-036fa841.js","assets/index-d002dba5.js","assets/index-746205fb.js","assets/InfoCircleFilled-14d8cda3.js","assets/zoom-de641651.js","assets/DialogWrap-6ec0a3f8.js","assets/BaseInput-f1ec11a5.js","assets/Overflow-2b833c0f.js","assets/CompetitionUpdateForm-30e5ddf4.css"])),y=s.lazy(()=>x(()=>import("./EvaluationTests-5d2064cf.js"),["assets/EvaluationTests-5d2064cf.js","assets/index-b0686eb3.js","assets/index-f52ba512.css","assets/index-1172dc73.js","assets/index-036fa841.js","assets/index-d002dba5.js","assets/index-746205fb.js","assets/InfoCircleFilled-14d8cda3.js","assets/zoom-de641651.js","assets/DialogWrap-6ec0a3f8.js","assets/CompetitionUpdateForm-30e5ddf4.css"])),R=({problemsData:r,onUpdate:p,userData:n})=>{const{user:o}=d.useContext(I),[l,c]=d.useState(!1),[k,m]=d.useState(null),{theme:u}=d.useContext(T),h=i=>{if(i)return e.jsx(C,{dataSource:r,columns:[{title:"korisničko ime",dataIndex:"voditelj",key:"korisnickoIme",className:"th-td"},{title:"naziv",dataIndex:"nazivZadatka",key:"nazivZadatka",className:"th-td",sorter:(a,t)=>a.nazivZadatka.localeCompare(t.nazivZadatka)},{title:"tekst",dataIndex:"tekstZadatka",key:"tekstZadatka",className:"th-td"},{title:"broj bodova",dataIndex:"brojBodova",key:"brojBodova",className:"th-td",sorter:(a,t)=>a.brojBodova-t.brojBodova},{title:"vremensko ograničenje",dataIndex:"vremenskoOgranicenje",key:"vremenskoOgranicenje",className:"th-td",sorter:(a,t)=>a.vremenskoOgranicenje-t.vremenskoOgranicenje},...o.uloga==="NATJECATELJ"?[{title:"",dataIndex:"zadatakId",key:"action",className:"th-td",render:a=>e.jsx(v,{to:`/problem/${a}`,children:"riješi"})}]:[],...o.uloga==="VODITELJ"&&o.korisnickoIme===n.korisnickoIme||o.uloga==="ADMIN"?[{title:"status",dataIndex:"privatniZadatak",key:"status",className:"th-td",sorter:(a,t)=>(a.privatniZadatak?1:-1)-(t.privatniZadatak?1:-1),render:a=>e.jsxs("div",{children:[a&&e.jsx("p",{children:"privatni"}),!a&&e.jsx("p",{children:"javni"})]})},{title:"",key:"edit",className:"th-td",render:a=>e.jsx("span",{children:e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"učitavanje..."}),children:e.jsx(B,{zadatakId:a.zadatakId??0,onUpdateSuccess:f})})})},{title:"",key:"tests",className:"th-td",render:a=>e.jsx("span",{children:e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"učitavanje..."}),children:e.jsx("button",{onClick:()=>b(a.zadatakId),children:"prikaži testove"})})})}]:[]],pagination:!1,rowKey:"zadatakId",showSorterTooltip:!1,style:{tableLayout:"fixed"}})},f=()=>{p()},b=i=>{m(i),c(!0)},g=()=>{c(!1),m(null)};return e.jsxs("div",{className:"problemContainer",children:[o.korisnickoIme===n.korisnickoIme&&e.jsx(v,{to:"/problems/new",children:e.jsx("button",{className:"addBtn",children:"novi zadatak"})}),r?r.length===0?e.jsx("div",{children:"nema zadataka"}):e.jsx("div",{className:"tableWrapper",children:e.jsx("div",{className:"info-table",children:u.isThemeDark==!1?e.jsx(j,{theme:{components:{Table:{headerBg:"#f4c95de7",rowHoverBg:"#f4c95d52",borderColor:"#00000085",headerFilterHoverBg:"#f4c95de7",headerSortActiveBg:"#f4c95de7",headerSortHoverBg:"#f4c95da9",headerBorderRadius:0,colorPrimary:"#dd7230",headerSplitColor:"transparent",colorBgContainer:"#fff",colorText:"#000"}}},children:h(r)}):e.jsx(j,{theme:{components:{Table:{headerBg:"#dd7230",rowHoverBg:"#dcdcdc34",borderColor:"#00000085",headerFilterHoverBg:"#dd7230e0",headerSortActiveBg:"#dd7230e0",headerSortHoverBg:"#dd7230",headerBorderRadius:0,colorPrimary:"#f4c95d",headerSplitColor:"transparent",colorBgContainer:"#2A2D34",colorText:" #ECDCC9"}}},children:h(r)})})}):e.jsx("p",{children:"greška prilikom dohvaćanja zadataka"}),l&&k&&e.jsx(s.Suspense,{fallback:e.jsx("div",{children:"učitavanje..."}),children:e.jsx(y,{zadatakId:k,visible:l,onClose:g})})]})};export{R as default};
