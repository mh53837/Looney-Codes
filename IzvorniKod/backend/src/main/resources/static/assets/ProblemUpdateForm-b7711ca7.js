import{r,U as w,T as D,j as t,R as M}from"./index-b0686eb3.js";/* empty css                              */import{q as B}from"./index-1172dc73.js";import{M as N}from"./index-036fa841.js";import{S as $}from"./BaseInput-f1ec11a5.js";import"./index-d002dba5.js";import"./index-746205fb.js";import"./InfoCircleFilled-14d8cda3.js";import"./zoom-de641651.js";import"./DialogWrap-6ec0a3f8.js";import"./Overflow-2b833c0f.js";const X=({zadatakId:i,onUpdateSuccess:z})=>{const[e,T]=r.useState(null),{user:v}=r.useContext(w),{theme:A}=r.useContext(D),[P,l]=r.useState(!1),[S,d]=r.useState(!1),[c,k]=r.useState(""),[u,m]=r.useState(""),[j,n]=r.useState(""),[x,g]=r.useState(0),[p,h]=r.useState(!0),C=a=>{console.log(a.target.value),a.target.value==="true"?h(!0):a.target.value==="false"&&h(!1)},E=a=>{const o=parseInt(a,10);o==10?n("RECRUIT"):o==20?n("VETERAN"):o==50&&n("REALISM"),g(o)};r.useEffect(()=>{(async()=>{try{const s=await(await fetch(`/api/problems/get/${i}`)).json();T(s),k(s.nazivZadatka),m(s.tekstZadatka),g(s.brojBodova),n(s.tezinaZadatka),h(s.privatniZadatak)}catch(o){console.error("Error fetching initial data:",o)}})()},[i]);const y=()=>t.jsx(M.Suspense,{fallback:t.jsx("div",{children:"učitavanje..."}),children:t.jsx(N,{title:"uredi zadatak",open:P,onOk:b,confirmLoading:S,onCancel:O,cancelText:"odustani",okText:"spremi promjene",okButtonProps:{style:{color:"#2A2D34"}},cancelButtonProps:{style:{color:"#2A2D34"}},children:t.jsxs("div",{className:"updateFormContainer",children:[t.jsx("p",{children:"naziv:"}),t.jsx("input",{className:"problemUpdateForm",type:"text",placeholder:"naziv zadatka",value:c,onChange:a=>k(a.target.value)}),t.jsx("p",{children:"tekst:"}),t.jsx("input",{className:"problemUpdateForm",type:"text",placeholder:"tekst zadatka",value:u,onChange:a=>m(a.target.value)}),t.jsx("p",{children:"broj bodova: "}),t.jsx($,{defaultValue:(e==null?void 0:e.brojBodova.toString())||"10",style:{width:120},onChange:E,options:[{value:"10",label:"10"},{value:"20",label:"20"},{value:"50",label:"50"}]}),t.jsx("p",{children:"status zadatka:"}),t.jsxs("label",{children:[t.jsx("input",{type:"radio",value:"true",checked:p===!0,onChange:C}),"privatni"]}),t.jsxs("label",{children:[t.jsx("input",{type:"radio",value:"false",checked:p===!1,onChange:C}),"javni"]})]})})}),Z=()=>{l(!0)},b=async()=>{d(!0);try{await R(i),l(!1),d(!1),z()}catch(a){console.error("Error handling edit:",a),d(!1)}},O=()=>{console.log("Clicked cancel button"),l(!1)},R=async a=>{try{const o=btoa(`${v.korisnickoIme}:${v.lozinka}`),s={zadatakId:a,nazivZadatka:c||(e==null?void 0:e.nazivZadatka),tekstZadatka:u||(e==null?void 0:e.tekstZadatka),voditelj:e==null?void 0:e.voditelj,brojBodova:x||(e==null?void 0:e.brojBodova),privatniZadatak:p,tezinaZadatka:j||(e==null?void 0:e.tezinaZadatka),vremenskoOgranicenje:e==null?void 0:e.vremenskoOgranicenje};console.log("updated data:",s);const f=await fetch(`/api/problems/update/${a}`,{method:"POST",headers:{Authorization:`Basic ${o}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(f.ok){console.log(`successfully updated zadatak data for: ${a}`);const U=await f.json();console.log("API Response:",U)}else console.error("failed to update zadatak data:",f.statusText)}catch(o){console.error("error updating zadatak data:",o)}};return t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:Z,children:"uredi"}),A.isThemeDark==!1?t.jsx(B,{theme:{components:{Modal:{contentBg:"#fff"},Button:{colorPrimary:"#dd7230",colorPrimaryHover:"#dd723081",colorPrimaryActive:"#dd723081"}}},children:y()}):t.jsx(B,{theme:{components:{Modal:{contentBg:"#2A2D34",headerBg:"#2A2D34",footerBg:"#2A2D34",titleColor:"#ECDCC9",colorPrimary:"#2A2D34",colorPrimaryText:"#2A2D34",colorText:"#ECDCC9"},Button:{colorPrimary:"#dd7230e0",colorPrimaryHover:"#ECDCC9",colorPrimaryActive:"#2A2D34",colorLinkHover:"#000",textHoverBg:"#2A2D34",colorText:"#2A2D34",colorPrimaryText:"#2A2D34"}}},children:y()})]})};export{X as default};
