import{r as n,U,a5 as I,z as e,x as p,R,a8 as b}from"./index-611d8f01.js";import{a as C,d as g,D as y}from"./hr-54846361.js";/* empty css                              */import{S as H}from"./index-a80c1b81.js";import"./index-bcf704fb.js";const V=({natjecanjeId:s,onUpdateSuccess:v})=>{const{user:h}=n.useContext(U),[t,P]=n.useState(null),[A,c]=n.useState(!1),[D,l]=n.useState(!1),[i,m]=n.useState(""),[d,f]=n.useState(null),[j,x]=n.useState(null),{theme:S}=n.useContext(I);n.useEffect(()=>{(async()=>{try{const r=await(await fetch(`/api/natjecanja/get/${s}`)).json();P(r),m(r.nazivNatjecanja),f(g(r.pocetakNatjecanja)),x(g(r.krajNatjecanja))}catch(o){console.error("Error fetching initial data:",o)}})()},[s]);const k=()=>e.jsx(p,{locale:C,children:e.jsx(R.Suspense,{fallback:e.jsx("div",{children:"učitavanje..."}),children:e.jsx(b,{title:"uredi natjecanje",open:A,onOk:T,confirmLoading:D,onCancel:B,cancelText:"odustani",okText:"spremi promjene",okButtonProps:{style:{color:"#2A2D34"}},cancelButtonProps:{style:{color:"#2A2D34"}},children:e.jsxs("div",{className:"updateFormContainer",children:[e.jsx("input",{className:"competitionUpdateForm",type:"text",placeholder:"naziv natjecanja",value:i,onChange:a=>m(a.target.value)}),e.jsxs(H,{direction:"vertical",children:[e.jsx(y,{showTime:!0,placeholder:"početak natjecanja",value:d,onChange:z}),e.jsx(y,{showTime:!0,placeholder:"kraj natjecanja",value:j,onChange:E})]})]})})})}),N=()=>{c(!0)},T=async()=>{l(!0);try{await w(s),c(!1),l(!1),v()}catch(a){console.error("Error handling edit:",a),l(!1)}},B=()=>{console.log("Clicked cancel button"),c(!1)},z=(a,o)=>{console.log(a,o),f(a)},E=(a,o)=>{console.log(a,o),x(a)},w=async a=>{try{const o=btoa(`${h.korisnickoIme}:${h.lozinka}`),r={natjecanjeId:a,nazivNatjecanja:i||(t==null?void 0:t.nazivNatjecanja),pocetakNatjecanja:d?d.toISOString():t==null?void 0:t.pocetakNatjecanja,krajNatjecanja:j?j.toISOString():t==null?void 0:t.krajNatjecanja,korisnickoImeVoditelja:t==null?void 0:t.korisnickoImeVoditelja};console.log("updated data:",r);const u=await fetch("/api/natjecanja/update",{method:"POST",headers:{Authorization:`Basic ${o}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(u.ok){console.log(`successfully updated competition data for: ${a}`);const O=await u.json();console.log("API Response:",O)}else console.error("failed to update competition data:",u.statusText)}catch(o){console.error("error updating competition data:",o)}};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:N,children:"uredi"}),S.isThemeDark==!1?e.jsx(p,{locale:C,theme:{components:{Modal:{contentBg:"#fff"},Button:{colorPrimary:"#dd7230",colorPrimaryHover:"#dd723081",colorPrimaryActive:"#dd723081"}}},children:k()}):e.jsx(p,{theme:{components:{Modal:{contentBg:"#2A2D34",headerBg:"#2A2D34",footerBg:"#2A2D34",titleColor:"#ECDCC9",colorPrimary:"#2A2D34",colorPrimaryText:"#2A2D34",colorText:"#ECDCC9"},Button:{colorPrimary:"#dd7230e0",colorPrimaryHover:"#ECDCC9",colorPrimaryActive:"#2A2D34",colorLinkHover:"#000",textHoverBg:"#2A2D34",colorText:"#2A2D34",colorPrimaryText:"#2A2D34"}}},children:k()})]})};export{V as default};
