import{r,U,T as I,j as e,R as M}from"./index-b0686eb3.js";import{a as C,d as g,D as y}from"./hr-3d4347db.js";/* empty css                              */import{q as u}from"./index-1172dc73.js";import{M as R}from"./index-036fa841.js";import{S as b}from"./index-179dfcbb.js";import"./index-d002dba5.js";import"./index-746205fb.js";import"./zoom-de641651.js";import"./interopRequireDefault-01ffd8a5.js";import"./InfoCircleFilled-14d8cda3.js";import"./DialogWrap-6ec0a3f8.js";const X=({natjecanjeId:s,onUpdateSuccess:v})=>{const{user:m}=r.useContext(U),[o,P]=r.useState(null),[A,c]=r.useState(!1),[D,l]=r.useState(!1),[i,h]=r.useState(""),[d,f]=r.useState(null),[p,x]=r.useState(null),{theme:S}=r.useContext(I);r.useEffect(()=>{(async()=>{try{const n=await(await fetch(`/api/natjecanja/get/${s}`)).json();P(n),h(n.nazivNatjecanja),f(g(n.pocetakNatjecanja)),x(g(n.krajNatjecanja))}catch(a){console.error("Error fetching initial data:",a)}})()},[s]);const k=()=>e.jsx(u,{locale:C,children:e.jsx(M.Suspense,{fallback:e.jsx("div",{children:"učitavanje..."}),children:e.jsx(R,{title:"uredi natjecanje",open:A,onOk:T,confirmLoading:D,onCancel:B,cancelText:"odustani",okText:"spremi promjene",okButtonProps:{style:{color:"#2A2D34"}},cancelButtonProps:{style:{color:"#2A2D34"}},children:e.jsxs("div",{className:"updateFormContainer",children:[e.jsx("input",{className:"competitionUpdateForm",type:"text",placeholder:"naziv natjecanja",value:i,onChange:t=>h(t.target.value)}),e.jsxs(b,{direction:"vertical",children:[e.jsx(y,{showTime:!0,placeholder:"početak natjecanja",value:d,onChange:E}),e.jsx(y,{showTime:!0,placeholder:"kraj natjecanja",value:p,onChange:w})]})]})})})}),N=()=>{c(!0)},T=async()=>{l(!0);try{await z(s),c(!1),l(!1),v()}catch(t){console.error("Error handling edit:",t),l(!1)}},B=()=>{console.log("Clicked cancel button"),c(!1)},E=(t,a)=>{console.log(t,a),f(t)},w=(t,a)=>{console.log(t,a),x(t)},z=async t=>{try{const a=btoa(`${m.korisnickoIme}:${m.lozinka}`),n={natjecanjeId:t,nazivNatjecanja:i||(o==null?void 0:o.nazivNatjecanja),pocetakNatjecanja:d?d.toISOString():o==null?void 0:o.pocetakNatjecanja,krajNatjecanja:p?p.toISOString():o==null?void 0:o.krajNatjecanja,korisnickoImeVoditelja:o==null?void 0:o.korisnickoImeVoditelja};console.log("updated data:",n);const j=await fetch("/api/natjecanja/update",{method:"POST",headers:{Authorization:`Basic ${a}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(j.ok){console.log(`successfully updated competition data for: ${t}`);const O=await j.json();console.log("API Response:",O)}else console.error("failed to update competition data:",j.statusText)}catch(a){console.error("error updating competition data:",a)}};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:N,children:"uredi"}),S.isThemeDark==!1?e.jsx(u,{locale:C,theme:{components:{Modal:{contentBg:"#fff"},Button:{colorPrimary:"#dd7230",colorPrimaryHover:"#dd723081",colorPrimaryActive:"#dd723081"}}},children:k()}):e.jsx(u,{theme:{components:{Modal:{contentBg:"#2A2D34",headerBg:"#2A2D34",footerBg:"#2A2D34",titleColor:"#ECDCC9",colorPrimary:"#2A2D34",colorPrimaryText:"#2A2D34",colorText:"#ECDCC9"},Button:{colorPrimary:"#dd7230e0",colorPrimaryHover:"#ECDCC9",colorPrimaryActive:"#2A2D34",colorLinkHover:"#000",textHoverBg:"#2A2D34",colorText:"#2A2D34",colorPrimaryText:"#2A2D34"}}},children:k()})]})};export{X as default};
