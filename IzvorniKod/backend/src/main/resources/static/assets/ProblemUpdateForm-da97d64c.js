import{r as s,U as w,ad as D,S as t,M as B,R as M,ah as N,T as $}from"./index-1a8425e1.js";/* empty css                              */const I=({zadatakId:d,onUpdateSuccess:z})=>{const[e,T]=s.useState(null),{user:f}=s.useContext(w),{theme:A}=s.useContext(D),[P,i]=s.useState(!1),[S,l]=s.useState(!1),[c,k]=s.useState(""),[u,j]=s.useState(""),[x,r]=s.useState(""),[g,m]=s.useState(0),[p,h]=s.useState(!0),C=a=>{console.log(a.target.value),a.target.value==="true"?h(!0):a.target.value==="false"&&h(!1)},E=a=>{const o=parseInt(a,10);o==10?r("RECRUIT"):o==20?r("VETERAN"):o==50&&r("REALISM"),m(o)};s.useEffect(()=>{(async()=>{try{const n=await(await fetch(`/api/problems/get/${d}`)).json();T(n),k(n.nazivZadatka),j(n.tekstZadatka),m(n.brojBodova),r(n.tezinaZadatka),h(n.privatniZadatak)}catch(o){console.error("Error fetching initial data:",o)}})()},[d]);const y=()=>t.jsx(M.Suspense,{fallback:t.jsx("div",{children:"učitavanje..."}),children:t.jsx(N,{title:"uredi zadatak",open:P,onOk:b,confirmLoading:S,onCancel:O,cancelText:"odustani",okText:"spremi promjene",okButtonProps:{style:{color:"#2A2D34"}},cancelButtonProps:{style:{color:"#2A2D34"}},children:t.jsxs("div",{className:"updateFormContainer",children:[t.jsx("p",{children:"naziv:"}),t.jsx("input",{className:"problemUpdateForm",type:"text",placeholder:"naziv zadatka",value:c,onChange:a=>k(a.target.value)}),t.jsx("p",{children:"tekst:"}),t.jsx("input",{className:"problemUpdateForm",type:"text",placeholder:"tekst zadatka",value:u,onChange:a=>j(a.target.value)}),t.jsx("p",{children:"težina (broj bodova): "}),t.jsx($,{defaultValue:(e==null?void 0:e.brojBodova.toString())||"10",style:{width:160},onChange:E,options:[{value:"10",label:"★ (10 bodova)"},{value:"20",label:"★★ (20 bodova)"},{value:"50",label:"★★★ (50 bodova)"}]}),t.jsx("p",{children:"status zadatka:"}),t.jsxs("label",{children:[t.jsx("input",{type:"radio",value:"true",checked:p===!0,onChange:C}),"privatni"]}),t.jsxs("label",{children:[t.jsx("input",{type:"radio",value:"false",checked:p===!1,onChange:C}),"javni"]})]})})}),Z=()=>{i(!0)},b=async()=>{l(!0);try{await R(d),i(!1),l(!1),z()}catch(a){console.error("Error handling edit:",a),l(!1)}},O=()=>{i(!1)},R=async a=>{try{const o=btoa(`${f.korisnickoIme}:${f.lozinka}`),n={zadatakId:a,nazivZadatka:c||(e==null?void 0:e.nazivZadatka),tekstZadatka:u||(e==null?void 0:e.tekstZadatka),voditelj:e==null?void 0:e.voditelj,brojBodova:g||(e==null?void 0:e.brojBodova),privatniZadatak:p,tezinaZadatka:x||(e==null?void 0:e.tezinaZadatka),vremenskoOgranicenje:e==null?void 0:e.vremenskoOgranicenje};console.log("updated data:",n);const v=await fetch(`/api/problems/update/${a}`,{method:"POST",headers:{Authorization:`Basic ${o}`,"Content-Type":"application/json"},body:JSON.stringify(n)});if(v.ok){console.log(`successfully updated zadatak data for: ${a}`);const U=await v.json();console.log("API Response:",U)}else console.error("failed to update zadatak data:",v.statusText)}catch(o){console.error("error updating zadatak data:",o)}};return t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:Z,children:"uredi"}),A.isThemeDark==!1?t.jsx(B,{theme:{components:{Modal:{contentBg:"#fff"},Button:{colorPrimary:"#dd7230",colorPrimaryHover:"#dd723081",colorPrimaryActive:"#dd723081"}}},children:y()}):t.jsx(B,{theme:{components:{Modal:{contentBg:"#2A2D34",headerBg:"#2A2D34",footerBg:"#2A2D34",titleColor:"#ECDCC9",colorPrimary:"#2A2D34",colorPrimaryText:"#2A2D34",colorText:"#ECDCC9"},Button:{colorPrimary:"#dd7230e0",colorPrimaryHover:"#ECDCC9",colorPrimaryActive:"#2A2D34",colorLinkHover:"#000",textHoverBg:"#2A2D34",colorText:"#2A2D34",colorPrimaryText:"#2A2D34"}}},children:y()})]})};export{I as default};
