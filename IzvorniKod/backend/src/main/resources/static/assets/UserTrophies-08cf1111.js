import{r as n,S as a}from"./index-1bf42253.js";const f=({userData:r})=>{const[s,p]=n.useState([]),[m,l]=n.useState(null);return n.useEffect(()=>{(r==null?void 0:r.uloga)==="NATJECATELJ"&&fetch(`/api/trophies/user/${r.korisnickoIme}`).then(e=>e.json()).then(e=>{p(e)}).catch(e=>{console.error("error fetching trophy data:",e)})},[r]),n.useEffect(()=>{(async()=>{try{if(s.length>0){const t=s.map(async o=>(await(await fetch(`/api/natjecanja/get/${o.natjecanjeId}`)).json()).nazivNatjecanja),i=await Promise.all(t);p(o=>o.map((h,c)=>({...h,natjecanjeNaziv:i[c]})))}}catch(t){console.error("Error fetching competition names:",t)}})()},[s]),n.useEffect(()=>{(async()=>{try{if(s.length>0){const t=s.map(async o=>{const c=await(await fetch(`/api/trophies/image/${o.peharId}`)).blob();return URL.createObjectURL(c)}),i=await Promise.all(t);l(i)}}catch(t){console.error("Error fetching trophy pictures:",t)}})()},[s]),a.jsxs("div",{children:[s.length===0&&a.jsx("p",{children:"nema osvojenih pehara"}),s.map((e,t)=>a.jsxs("div",{className:"userTrophy",children:[a.jsx("h4",{children:e.natjecanjeNaziv}),a.jsx("p",{children:"|"}),a.jsxs("p",{children:["Mjesto: ",e.mjesto]}),a.jsx("p",{children:"|"}),m&&a.jsx("img",{className:"trophyImg",src:m[t],alt:"slika pehara"})]},e.peharId))]})};export{f as default};
